#!/usr/bin/env node
"use strict";var e,o;let i,r;Object.defineProperty(exports,"__esModule",{value:!0});const a=require("@octokit/rest"),t=(o=require("yargs"))&&o.__esModule?o:{default:o},s=require("./git.js"),p=require("./cli.js"),n=t.default.usage("Usage: -e <exec> -u <userName> -n <repoName> -d <description> -p <isPrivate>").option("e",{alias:"exec",default:"copyRepo",describe:"exec command copyRepo(clone+local config)/makeRepo(create remote+push)/removeRepo(delete remote+local)",type:"string",demandOption:!0}).option("u",{alias:"userName",default:"mooninlearn",describe:"Name of User",type:"string"}).option("n",{alias:"repoName",describe:"NameOfRepository",type:"string"}).option("p",{alias:"isPrivate",default:!1,describe:"Private Repository",type:"boolean"}).option("d",{alias:"description",describe:"Description For Repository",type:"string"}).argv,c=(0,s.findGithubAccount)(n.userName??"");c.userName=n.userName??"",console.log(`#### git account: ${JSON.stringify(c)}`);const m=new a.Octokit({auth:c.token}),l=(e=n.repoName??"",(r=(0,p.getCurrentDir)()).split("/").pop()!==e&&(r+=`/${e}`),r??"");switch(n.exec){case"listRepos":(async()=>{try{i=await (0,s.findAllRepos)(m),console.log(JSON.stringify(i,null,2))}catch(e){console.error("저장소 목록 조회 중 오류 발생:",e)}})();break;case"createRemoteRepo":console.log(`createRemoteRepo: ${n}`),(0,s.createRemoteRepo)(m,{name:n.repoName??"",description:n.description??"",isPrivate:n.isPrivate??!1});break;case"deleteRemoteRepo":(0,s.deleteRemoteRepo)(m,{name:n.repoName??""},c);break;case"setLocalConfig":(0,s.setLocalConfig)({name:n.repoName??"",description:n.description??""},c,l);break;case"cloneRepo":(0,s.cloneRepo)({name:n.repoName??"",description:n.description??""},c,l);break;case"initLocalRepo":(0,s.initLocalRepo)({name:n.repoName??"",description:n.description??""},c,l);break;case"initRepo":console.log("====initRepo"),(0,s.initRepo)(m,{name:n.repoName??"",description:n.description??"",isPrivate:n.isPrivate??!1},c,l);break;case"pushRepo":(0,s.pushRepo)({name:n.repoName??"",description:n.description??""},c,l);break;case"copyRepo":(0,s.copyRepo)({name:n.repoName??"",description:n.description??"description",isPrivate:n.isPrivate??!1},c,l);break;case"makeRepo":(0,s.makeRepo)(m,{name:n.repoName??"",description:n.description??"",isPrivate:n.isPrivate??!1},c,l);break;case"removeRepo":(0,s.removeRepo)(m,{name:n.repoName??""},c,l)}