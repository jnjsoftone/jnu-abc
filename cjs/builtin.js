"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(exports,{PLATFORM:function(){return s},composeHangul:function(){return l},copyDir:function(){return _},deleteFilesInFolder:function(){return P},exists:function(){return w},existsFile:function(){return v},existsFolder:function(){return x},findFiles:function(){return h},findFolders:function(){return $},getFileBufferFromUrl:function(){return D},getFileStreamFromUrl:function(){return b},loadEnv:function(){return y},loadFile:function(){return p},loadJson:function(){return d},makeDir:function(){return S},moveFile:function(){return E},moveFiles:function(){return j},renameFilesInFolder:function(){return O},sanitizeName:function(){return f},saveEnv:function(){return m},saveFile:function(){return g},saveFileFromUrl:function(){return k},saveJson:function(){return F},setPath:function(){return a},slashedFolder:function(){return c},streamToBuffer:function(){return W},substituteInFile:function(){return R}});const e=/*#__PURE__*/function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=i?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(require("fs")),t=/*#__PURE__*/i(require("path")),r=/*#__PURE__*/i(require("https")),n=/*#__PURE__*/i(require("http"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}const s="win32"===process.platform?"win":"darwin"===process.platform?"mac":"linux"===process.platform?"linux":process.platform,u=e=>e.replace(/^\uFEFF/gm,"").replace(/^\u00BB\u00BF/gm,"").replace(/\r\n/g,"\n"),c=e=>(e=e.replace(/\\/g,"/")).endsWith("/")?e.slice(0,-1):e,a=e=>(e.startsWith(".")&&(e=t.default.join(process.cwd(),e)),c(e)),l=e=>e?e.toString().normalize("NFKC"):"",f=e=>e?(e=l(e)).replace(/\[/g,"(").replace(/\]/g,")").replace(/[^\uAC00-\uD7A3a-zA-Z0-9_\(\)\<\>,\s]/g,"").replace(/\s+/g," ").trim():"",p=(t,r="utf8")=>{try{return u(e.readFileSync(a(t),{encoding:r}))}catch{return""}},d=(t,r="utf8")=>{try{return JSON.parse(u(e.readFileSync(a(t),{encoding:r})))}catch{return{}}},y=(t,r="utf8")=>{try{let n=u(e.readFileSync(a(t),{encoding:r}));if(!n)return{};let i=n.split("\n"),o={};for(let e of i){let t=e.split("="),[r,n]=[t[0].trim(),t.slice(1).join("=").trim()];!r||r.startsWith("#")||r.startsWith("//")||(o[r]=n.replace(/^['"]|['"]$/g,""))}return o}catch{return{}}},m=(t,r,n="utf8")=>{let i=Object.entries(r).map(([e,t])=>`${e}=${t}`).join("\n");e.writeFileSync(a(t),i,{encoding:n})},g=(r,n="",{encoding:i="utf-8",overwrite:o=!0,newFile:s=!0}={})=>{if(r=a(r),s&&e.existsSync(r)){let n=t.default.dirname(r),i=t.default.extname(r),o=t.default.basename(r,i),s=1;for(;e.existsSync(r);)r=t.default.join(n,`${o}(${s})${i}`),s++}e.mkdirSync(t.default.dirname(r),{recursive:!0}),o?e.writeFileSync(r,n,i):e.appendFileSync(r,n,i)},F=(e,t={},{indent:r=2,overwrite:n=!0,newFile:i=!1}={})=>{g(a(e),JSON.stringify(t,null,r),{overwrite:n,newFile:i})},S=t=>{e.mkdirSync(a(t),{recursive:!0})},_=(t,r,n=!0)=>{e.cpSync(a(t),a(r),{recursive:n})},h=(r,n="",i=[])=>{if(!e.existsSync(r))return[];let o=e.readdirSync(r);return i=i||[],o.forEach(function(o){e.statSync(r+"/"+o).isDirectory()?i=h(r+"/"+o,n,i):(n instanceof RegExp?n:new RegExp(n.replace(/\*/g,".*"))).test(o)&&i.push(t.default.join(r,"/",o))}),i};function $(r,n=""){let i=[];for(let o of e.readdirSync(r)){let s=t.default.join(r,o),u=n instanceof RegExp?n:new RegExp(n.replace(/\*/g,".*"));e.statSync(s).isDirectory()&&u.test(o)&&i.push(c(s))}return i}const x=t=>e.existsSync(t),v=t=>e.existsSync(t),w=t=>e.existsSync(t),E=(t,r,n,i)=>{t=c(t),r=c(r),e.rename(`${t}/${n}`,`${r}/${i}`,e=>console.log(e))},j=(t,r,n,i)=>{t=c(t),r=c(r),e.existsSync(r)||e.mkdirSync(r,{recursive:!0});for(let o=0;o<n.length;o++){let s=n[o],u=i[o];e.rename(`${t}/${s}`,`${r}/${u}`,e=>console.log(e))}},O=(t,r,n)=>(t=`${process.env.DIR_ROOT}/${t}`,r=e=>e.endsWith(".ts"),n=e=>`${t}/${e}`,e.readdirSync(t).filter(e=>r(e)).map(e=>n(e))),P=(r,n="node_modules/,.git/.DS_Store",i=!0)=>{try{if(!e.existsSync(r))return;let o=n.split(",").map(e=>e.endsWith("/")?e:e.includes("*")?RegExp("^"+e.replace(/\*/g,".*")+"$"):e);for(let s of e.readdirSync(r))try{let u=t.default.join(r,s),c=e.statSync(u);c.isDirectory()&&i?o.some(e=>"string"==typeof e&&e.endsWith("/")&&s+"/"===e)?e.rmSync(u,{recursive:!0,force:!0}):P(u,n,i):c.isFile()&&o.some(e=>e instanceof RegExp?e.test(s):s===e)&&e.unlinkSync(u)}catch(e){console.error(`Error processing ${s}: ${e.message}`);continue}return{folderPath:r,pattern:n}}catch(e){return console.error(`Error processing folder ${r}: ${e.message}`),{}}},R=(e,t)=>{let r=p(e);if(r){for(let[e,n]of Object.entries(t))r=r.replace(RegExp(e,"g"),n);g(e,r,{overwrite:!0,newFile:!1})}},b=async e=>new Promise((t,i)=>{let o=(e.startsWith("https")?r.default:n.default).get(e,e=>{if(301===e.statusCode||302===e.statusCode){b(e.headers.location).then(t).catch(i);return}if(200!==e.statusCode)return i(Error(`파일 스트림 가져오기 실패: 상태 코드 ${e.statusCode}`));t(e)});o.on("error",e=>{i(e)}),o.setTimeout(3e4,()=>{o.destroy(),i(Error("요청 타임아웃: 30초 경과"))})}),W=e=>new Promise((t,r)=>{let n=[];e.on("data",e=>n.push(e)),e.on("end",()=>t(Buffer.concat(n))),e.on("error",r)}),D=async e=>W(await b(e)),k=async(e,t)=>{g(e,await D(t))};